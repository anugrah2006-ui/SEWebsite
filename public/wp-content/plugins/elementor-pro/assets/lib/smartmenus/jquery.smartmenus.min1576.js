(function(o){typeof define=="function"&&define.amd?define(["jquery"],o):typeof module=="object"&&typeof module.exports=="object"?module.exports=o(require("jquery")):o(jQuery)})(function(o){function A(t){var e=".smartmenus_mouse";if(y||t)y&&t&&(o(document).off(e),y=!1);else{var s=!0,i=null,a={mousemove:function(n){var u={x:n.pageX,y:n.pageY,timeStamp:new Date().getTime()};if(i){var h=Math.abs(i.x-u.x),r=Math.abs(i.y-u.y);if((h>0||r>0)&&h<=4&&r<=4&&u.timeStamp-i.timeStamp<=300&&(p=!0,s)){var b=o(n.target).closest("a");b.is("a")&&o.each(m,function(){if(o.contains(this.$root[0],b[0]))return this.itemEnter({currentTarget:b[0]}),!1}),s=!1}}i=u}};a[D?"touchstart":"pointerover pointermove pointerout MSPointerOver MSPointerMove MSPointerOut"]=function(n){O(n.originalEvent)&&(p=!1)},o(document).on(d(a,e)),y=!0}}function O(t){return!/^(4|mouse)$/.test(t.pointerType)}function d(t,e){e||(e="");var s={};for(var i in t)s[i.split(" ").join(e+" ")+e]=t[i];return s}var m=[],p=!1,D="ontouchstart"in window,y=!1,F=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/60)},Y=window.cancelAnimationFrame||function(t){clearTimeout(t)},c=!!o.fn.animate;return o.SmartMenus=function(t,e){this.$root=o(t),this.opts=e,this.rootId="",this.accessIdPrefix="",this.$subArrow=null,this.activatedItems=[],this.visibleSubMenus=[],this.showTimeout=0,this.hideTimeout=0,this.scrollTimeout=0,this.clickActivated=!1,this.focusActivated=!1,this.zIndexInc=0,this.idInc=0,this.$firstLink=null,this.$firstSub=null,this.disabled=!1,this.$disableOverlay=null,this.$touchScrollingSub=null,this.cssTransforms3d="perspective"in t.style||"webkitPerspective"in t.style,this.wasCollapsible=!1,this.init()},o.extend(o.SmartMenus,{hideAll:function(){o.each(m,function(){this.menuHideAll()})},destroy:function(){for(;m.length;)m[0].destroy();A(!0)},prototype:{init:function(t){var e=this;if(!t){m.push(this),this.rootId=(new Date().getTime()+Math.random()+"").replace(/\D/g,""),this.accessIdPrefix="sm-"+this.rootId+"-",this.$root.hasClass("sm-rtl")&&(this.opts.rightToLeftSubMenus=!0);var s=".smartmenus";this.$root.data("smartmenus",this).attr("data-smartmenus-id",this.rootId).dataSM("level",1).on(d({"mouseover focusin":o.proxy(this.rootOver,this),"mouseout focusout":o.proxy(this.rootOut,this),keydown:o.proxy(this.rootKeyDown,this)},s)).on(d({mouseenter:o.proxy(this.itemEnter,this),mouseleave:o.proxy(this.itemLeave,this),mousedown:o.proxy(this.itemDown,this),focus:o.proxy(this.itemFocus,this),blur:o.proxy(this.itemBlur,this),click:o.proxy(this.itemClick,this)},s),"a"),s+=this.rootId,this.opts.hideOnClick&&o(document).on(d({touchstart:o.proxy(this.docTouchStart,this),touchmove:o.proxy(this.docTouchMove,this),touchend:o.proxy(this.docTouchEnd,this),click:o.proxy(this.docClick,this)},s)),o(window).on(d({"resize orientationchange":o.proxy(this.winResize,this)},s)),this.opts.subIndicators&&(this.$subArrow=o("<span/>").addClass("sub-arrow"),this.opts.subIndicatorsText&&this.$subArrow.html(this.opts.subIndicatorsText)),A()}if(this.$firstSub=this.$root.find("ul").each(function(){e.menuInit(o(this))}).eq(0),this.$firstLink=this.$root.find("a").eq(0),this.opts.markCurrentItem){var i=/(index|default)\.[^#\?\/]*/i,a=/#.*/,n=window.location.href.replace(i,""),u=n.replace(a,"");this.$root.find("a:not(.mega-menu a)").each(function(){var h=this.href.replace(i,""),r=o(this);h!=n&&h!=u||(r.addClass("current"),e.opts.markCurrentTree&&r.parentsUntil("[data-smartmenus-id]","ul").each(function(){o(this).dataSM("parent-a").addClass("current")}))})}this.wasCollapsible=this.isCollapsible()},destroy:function(t){if(!t){var e=".smartmenus";this.$root.removeData("smartmenus").removeAttr("data-smartmenus-id").removeDataSM("level").off(e),e+=this.rootId,o(document).off(e),o(window).off(e),this.opts.subIndicators&&(this.$subArrow=null)}this.menuHideAll();var s=this;this.$root.find("ul").each(function(){var i=o(this);i.dataSM("scroll-arrows")&&i.dataSM("scroll-arrows").remove(),i.dataSM("shown-before")&&((s.opts.subMenusMinWidth||s.opts.subMenusMaxWidth)&&i.css({width:"",minWidth:"",maxWidth:""}).removeClass("sm-nowrap"),i.dataSM("scroll-arrows")&&i.dataSM("scroll-arrows").remove(),i.css({zIndex:"",top:"",left:"",marginLeft:"",marginTop:"",display:""})),(i.attr("id")||"").indexOf(s.accessIdPrefix)==0&&i.removeAttr("id")}).removeDataSM("in-mega").removeDataSM("shown-before").removeDataSM("scroll-arrows").removeDataSM("parent-a").removeDataSM("level").removeDataSM("beforefirstshowfired").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeAttr("aria-expanded"),this.$root.find("a.has-submenu").each(function(){var i=o(this);i.attr("id").indexOf(s.accessIdPrefix)==0&&i.removeAttr("id")}).removeClass("has-submenu").removeDataSM("sub").removeAttr("aria-haspopup").removeAttr("aria-controls").removeAttr("aria-expanded").closest("li").removeDataSM("sub"),this.opts.subIndicators&&this.$root.find("span.sub-arrow").remove(),this.opts.markCurrentItem&&this.$root.find("a.current").removeClass("current"),t||(this.$root=null,this.$firstLink=null,this.$firstSub=null,this.$disableOverlay&&(this.$disableOverlay.remove(),this.$disableOverlay=null),m.splice(o.inArray(this,m),1))},disable:function(t){if(!this.disabled){if(this.menuHideAll(),!t&&!this.opts.isPopup&&this.$root.is(":visible")){var e=this.$root.offset();this.$disableOverlay=o('<div class="sm-jquery-disable-overlay"/>').css({position:"absolute",top:e.top,left:e.left,width:this.$root.outerWidth(),height:this.$root.outerHeight(),zIndex:this.getStartZIndex(!0),opacity:0}).appendTo(document.body)}this.disabled=!0}},docClick:function(t){return this.$touchScrollingSub?void(this.$touchScrollingSub=null):void((this.visibleSubMenus.length&&!o.contains(this.$root[0],t.target)||o(t.target).closest("a").length)&&this.menuHideAll())},docTouchEnd:function(t){if(this.lastTouch){if(this.visibleSubMenus.length&&(this.lastTouch.x2===void 0||this.lastTouch.x1==this.lastTouch.x2)&&(this.lastTouch.y2===void 0||this.lastTouch.y1==this.lastTouch.y2)&&(!this.lastTouch.target||!o.contains(this.$root[0],this.lastTouch.target))){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0);var e=this;this.hideTimeout=setTimeout(function(){e.menuHideAll()},350)}this.lastTouch=null}},docTouchMove:function(t){if(this.lastTouch){var e=t.originalEvent.touches[0];this.lastTouch.x2=e.pageX,this.lastTouch.y2=e.pageY}},docTouchStart:function(t){var e=t.originalEvent.touches[0];this.lastTouch={x1:e.pageX,y1:e.pageY,target:e.target}},enable:function(){this.disabled&&(this.$disableOverlay&&(this.$disableOverlay.remove(),this.$disableOverlay=null),this.disabled=!1)},getClosestMenu:function(t){for(var e=o(t).closest("ul");e.dataSM("in-mega");)e=e.parent().closest("ul");return e[0]||null},getHeight:function(t){return this.getOffset(t,!0)},getOffset:function(t,e){var s;t.css("display")=="none"&&(s={position:t[0].style.position,visibility:t[0].style.visibility},t.css({position:"absolute",visibility:"hidden"}).show());var i=t[0].getBoundingClientRect&&t[0].getBoundingClientRect(),a=i&&(e?i.height||i.bottom-i.top:i.width||i.right-i.left);return a||a===0||(a=e?t[0].offsetHeight:t[0].offsetWidth),s&&t.hide().css(s),a},getStartZIndex:function(t){var e=parseInt(this[t?"$root":"$firstSub"].css("z-index"));return!t&&isNaN(e)&&(e=parseInt(this.$root.css("z-index"))),isNaN(e)?1:e},getTouchPoint:function(t){return t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0]||t},getViewport:function(t){var e=t?"Height":"Width",s=document.documentElement["client"+e],i=window["inner"+e];return i&&(s=Math.min(s,i)),s},getViewportHeight:function(){return this.getViewport(!0)},getViewportWidth:function(){return this.getViewport()},getWidth:function(t){return this.getOffset(t)},handleEvents:function(){return!this.disabled&&this.isCSSOn()},handleItemEvents:function(t){return this.handleEvents()&&!this.isLinkInMegaMenu(t)},isCollapsible:function(){return this.$firstSub.css("position")=="static"},isCSSOn:function(){return this.$firstLink.css("display")!="inline"},isFixed:function(){var t=this.$root.css("position")=="fixed";return t||this.$root.parentsUntil("body").each(function(){if(o(this).css("position")=="fixed")return t=!0,!1}),t},isLinkInMegaMenu:function(t){return o(this.getClosestMenu(t[0])).hasClass("mega-menu")},isTouchMode:function(){return!p||this.opts.noMouseOver||this.isCollapsible()},itemActivate:function(t,e){var s=t.closest("ul"),i=s.dataSM("level");if(i>1&&(!this.activatedItems[i-2]||this.activatedItems[i-2][0]!=s.dataSM("parent-a")[0])){var a=this;o(s.parentsUntil("[data-smartmenus-id]","ul").get().reverse()).add(s).each(function(){a.itemActivate(o(this).dataSM("parent-a"))})}if(this.isCollapsible()&&!e||this.menuHideSubMenus(this.activatedItems[i-1]&&this.activatedItems[i-1][0]==t[0]?i:i-1),this.activatedItems[i-1]=t,this.$root.triggerHandler("activate.smapi",t[0])!==!1){var n=t.dataSM("sub");n&&(this.isTouchMode()||!this.opts.showOnClick||this.clickActivated)&&this.menuShow(n)}},itemBlur:function(t){var e=o(t.currentTarget);this.handleItemEvents(e)&&this.$root.triggerHandler("blur.smapi",e[0])},itemClick:function(t){var e=o(t.currentTarget);if(this.handleItemEvents(e)){if(this.$touchScrollingSub&&this.$touchScrollingSub[0]==e.closest("ul")[0])return this.$touchScrollingSub=null,t.stopPropagation(),!1;if(this.$root.triggerHandler("click.smapi",e[0])===!1)return!1;var s=e.dataSM("sub"),i=!!s&&s.dataSM("level")==2;if(s){var a=o(t.target).is(".sub-arrow"),n=this.isCollapsible(),u=/toggle$/.test(this.opts.collapsibleBehavior),h=/link$/.test(this.opts.collapsibleBehavior),r=/^accordion/.test(this.opts.collapsibleBehavior);if(s.is(":visible")){if(!n&&this.opts.showOnClick&&i)return this.menuHide(s),this.clickActivated=!1,this.focusActivated=!1,!1;if(n&&(u||a))return this.itemActivate(e,r),this.menuHide(s),!1}else if((!h||!n||a)&&(!n&&this.opts.showOnClick&&i&&(this.clickActivated=!0),this.itemActivate(e,r),s.is(":visible")))return this.focusActivated=!0,!1}return!(!n&&this.opts.showOnClick&&i||e.hasClass("disabled")||this.$root.triggerHandler("select.smapi",e[0])===!1)&&void 0}},itemDown:function(t){var e=o(t.currentTarget);this.handleItemEvents(e)&&e.dataSM("mousedown",!0)},itemEnter:function(t){var e=o(t.currentTarget);if(this.handleItemEvents(e)){if(!this.isTouchMode()){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0);var s=this;this.showTimeout=setTimeout(function(){s.itemActivate(e)},this.opts.showOnClick&&e.closest("ul").dataSM("level")==1?1:this.opts.showTimeout)}this.$root.triggerHandler("mouseenter.smapi",e[0])}},itemFocus:function(t){var e=o(t.currentTarget);this.handleItemEvents(e)&&(!this.focusActivated||this.isTouchMode()&&e.dataSM("mousedown")||this.activatedItems.length&&this.activatedItems[this.activatedItems.length-1][0]==e[0]||this.itemActivate(e,!0),this.$root.triggerHandler("focus.smapi",e[0]))},itemLeave:function(t){var e=o(t.currentTarget);this.handleItemEvents(e)&&(this.isTouchMode()||(e[0].blur(),this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0)),e.removeDataSM("mousedown"),this.$root.triggerHandler("mouseleave.smapi",e[0]))},menuHide:function(t){if(this.$root.triggerHandler("beforehide.smapi",t[0])!==!1&&(c&&t.stop(!0,!0),t.css("display")!="none")){var e=function(){t.css("z-index","")};this.isCollapsible()?c&&this.opts.collapsibleHideFunction?this.opts.collapsibleHideFunction.call(this,t,e):t.hide(this.opts.collapsibleHideDuration,e):c&&this.opts.hideFunction?this.opts.hideFunction.call(this,t,e):t.hide(this.opts.hideDuration,e),t.dataSM("scroll")&&(this.menuScrollStop(t),t.css({"touch-action":"","-ms-touch-action":"","-webkit-transform":"",transform:""}).off(".smartmenus_scroll").removeDataSM("scroll").dataSM("scroll-arrows").hide()),t.dataSM("parent-a").removeClass("highlighted").attr("aria-expanded","false"),t.attr({"aria-expanded":"false","aria-hidden":"true"});var s=t.dataSM("level");this.activatedItems.splice(s-1,1),this.visibleSubMenus.splice(o.inArray(t,this.visibleSubMenus),1),this.$root.triggerHandler("hide.smapi",t[0])}},menuHideAll:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0);for(var t=this.opts.isPopup?1:0,e=this.visibleSubMenus.length-1;e>=t;e--)this.menuHide(this.visibleSubMenus[e]);this.opts.isPopup&&(c&&this.$root.stop(!0,!0),this.$root.is(":visible")&&(c&&this.opts.hideFunction?this.opts.hideFunction.call(this,this.$root):this.$root.hide(this.opts.hideDuration))),this.activatedItems=[],this.visibleSubMenus=[],this.clickActivated=!1,this.focusActivated=!1,this.zIndexInc=0,this.$root.triggerHandler("hideAll.smapi")},menuHideSubMenus:function(t){for(var e=this.activatedItems.length-1;e>=t;e--){var s=this.activatedItems[e].dataSM("sub");s&&this.menuHide(s)}},menuInit:function(t){if(!t.dataSM("in-mega")){t.hasClass("mega-menu")&&t.find("ul").dataSM("in-mega",!0);for(var e=2,s=t[0];(s=s.parentNode.parentNode)!=this.$root[0];)e++;var i=t.prevAll("a").eq(-1);i.length||(i=t.prevAll().find("a").eq(-1)),i.addClass("has-submenu").dataSM("sub",t),t.dataSM("parent-a",i).dataSM("level",e).parent().dataSM("sub",t);var a=i.attr("id")||this.accessIdPrefix+ ++this.idInc,n=t.attr("id")||this.accessIdPrefix+ ++this.idInc;i.attr({id:a,"aria-haspopup":"true","aria-controls":n,"aria-expanded":"false"}),t.attr({id:n,role:"group","aria-hidden":"true","aria-labelledby":a,"aria-expanded":"false"}),this.opts.subIndicators&&i[this.opts.subIndicatorsPos](this.$subArrow.clone())}},menuPosition:function(t){var e,s,i=t.dataSM("parent-a"),a=i.closest("li"),n=a.parent(),u=t.dataSM("level"),h=this.getWidth(t),r=this.getHeight(t),b=i.offset(),z=b.left,q=b.top,H=this.getWidth(i),T=this.getHeight(i),k=o(window),$=k.scrollLeft(),S=k.scrollTop(),E=this.getViewportWidth(),g=this.getViewportHeight(),f=n.parent().is("[data-sm-horizontal-sub]")||u==2&&!n.hasClass("sm-vertical"),I=this.opts.rightToLeftSubMenus&&!a.is("[data-sm-reverse]")||!this.opts.rightToLeftSubMenus&&a.is("[data-sm-reverse]"),w=u==2?this.opts.mainMenuSubOffsetX:this.opts.subMenusSubOffsetX,x=u==2?this.opts.mainMenuSubOffsetY:this.opts.subMenusSubOffsetY;if(f?(e=I?H-h-w:w,s=this.opts.bottomToTopSubMenus?-r-x:T+x):(e=I?w-h:H-w,s=this.opts.bottomToTopSubMenus?T-x-r:x),this.opts.keepInViewport){var C=z+e,M=q+s;if(I&&C<$?e=f?$-C+e:H-w:!I&&C+h>$+E&&(e=f?$+E-h-C+e:w-h),f||(r<g&&M+r>S+g?s+=S+g-r-M:(r>=g||M<S)&&(s+=S-M)),f&&(M+r>S+g+.49||M<S)||!f&&r>g+.49){var v=this;t.dataSM("scroll-arrows")||t.dataSM("scroll-arrows",o([o('<span class="scroll-up"><span class="scroll-up-arrow"></span></span>')[0],o('<span class="scroll-down"><span class="scroll-down-arrow"></span></span>')[0]]).on({mouseenter:function(){t.dataSM("scroll").up=o(this).hasClass("scroll-up"),v.menuScroll(t)},mouseleave:function(l){v.menuScrollStop(t),v.menuScrollOut(t,l)},"mousewheel DOMMouseScroll":function(l){l.preventDefault()}}).insertAfter(t));var P=".smartmenus_scroll";if(t.dataSM("scroll",{y:this.cssTransforms3d?0:s-T,step:1,itemH:T,subH:r,arrowDownH:this.getHeight(t.dataSM("scroll-arrows").eq(1))}).on(d({mouseover:function(l){v.menuScrollOver(t,l)},mouseout:function(l){v.menuScrollOut(t,l)},"mousewheel DOMMouseScroll":function(l){v.menuScrollMousewheel(t,l)}},P)).dataSM("scroll-arrows").css({top:"auto",left:"0",marginLeft:e+(parseInt(t.css("border-left-width"))||0),width:h-(parseInt(t.css("border-left-width"))||0)-(parseInt(t.css("border-right-width"))||0),zIndex:t.css("z-index")}).eq(f&&this.opts.bottomToTopSubMenus?0:1).show(),this.isFixed()){var W={};W[D?"touchstart touchmove touchend":"pointerdown pointermove pointerup MSPointerDown MSPointerMove MSPointerUp"]=function(l){v.menuScrollTouch(t,l)},t.css({"touch-action":"none","-ms-touch-action":"none"}).on(d(W,P))}}}t.css({top:"auto",left:"0",marginLeft:e,marginTop:s-T})},menuScroll:function(t,e,s){var i,a=t.dataSM("scroll"),n=t.dataSM("scroll-arrows"),u=a.up?a.upEnd:a.downEnd;if(!e&&a.momentum){if(a.momentum*=.92,i=a.momentum,i<.5)return void this.menuScrollStop(t)}else i=s||(e||!this.opts.scrollAccelerate?this.opts.scrollStep:Math.floor(a.step));var h=t.dataSM("level");if(this.activatedItems[h-1]&&this.activatedItems[h-1].dataSM("sub")&&this.activatedItems[h-1].dataSM("sub").is(":visible")&&this.menuHideSubMenus(h-1),a.y=a.up&&u<=a.y||!a.up&&u>=a.y?a.y:Math.abs(u-a.y)>i?a.y+(a.up?i:-i):u,t.css(this.cssTransforms3d?{"-webkit-transform":"translate3d(0, "+a.y+"px, 0)",transform:"translate3d(0, "+a.y+"px, 0)"}:{marginTop:a.y}),p&&(a.up&&a.y>a.downEnd||!a.up&&a.y<a.upEnd)&&n.eq(a.up?1:0).show(),a.y==u)p&&n.eq(a.up?0:1).hide(),this.menuScrollStop(t);else if(!e){this.opts.scrollAccelerate&&a.step<this.opts.scrollStep&&(a.step+=.2);var r=this;this.scrollTimeout=F(function(){r.menuScroll(t)})}},menuScrollMousewheel:function(t,e){if(this.getClosestMenu(e.target)==t[0]){e=e.originalEvent;var s=(e.wheelDelta||-e.detail)>0;t.dataSM("scroll-arrows").eq(s?0:1).is(":visible")&&(t.dataSM("scroll").up=s,this.menuScroll(t,!0))}e.preventDefault()},menuScrollOut:function(t,e){p&&(/^scroll-(up|down)/.test((e.relatedTarget||"").className)||(t[0]==e.relatedTarget||o.contains(t[0],e.relatedTarget))&&this.getClosestMenu(e.relatedTarget)==t[0]||t.dataSM("scroll-arrows").css("visibility","hidden"))},menuScrollOver:function(t,e){if(p&&!/^scroll-(up|down)/.test(e.target.className)&&this.getClosestMenu(e.target)==t[0]){this.menuScrollRefreshData(t);var s=t.dataSM("scroll"),i=o(window).scrollTop()-t.dataSM("parent-a").offset().top-s.itemH;t.dataSM("scroll-arrows").eq(0).css("margin-top",i).end().eq(1).css("margin-top",i+this.getViewportHeight()-s.arrowDownH).end().css("visibility","visible")}},menuScrollRefreshData:function(t){var e=t.dataSM("scroll"),s=o(window).scrollTop()-t.dataSM("parent-a").offset().top-e.itemH;this.cssTransforms3d&&(s=-(parseFloat(t.css("margin-top"))-s)),o.extend(e,{upEnd:s,downEnd:s+this.getViewportHeight()-e.subH})},menuScrollStop:function(t){if(this.scrollTimeout)return Y(this.scrollTimeout),this.scrollTimeout=0,t.dataSM("scroll").step=1,!0},menuScrollTouch:function(t,e){if(e=e.originalEvent,O(e)){var s=this.getTouchPoint(e);if(this.getClosestMenu(s.target)==t[0]){var i=t.dataSM("scroll");if(/(start|down)$/i.test(e.type))this.menuScrollStop(t)?(e.preventDefault(),this.$touchScrollingSub=t):this.$touchScrollingSub=null,this.menuScrollRefreshData(t),o.extend(i,{touchStartY:s.pageY,touchStartTime:e.timeStamp});else if(/move$/i.test(e.type)){var a=i.touchY!==void 0?i.touchY:i.touchStartY;if(a!==void 0&&a!=s.pageY){this.$touchScrollingSub=t;var n=a<s.pageY;i.up!==void 0&&i.up!=n&&o.extend(i,{touchStartY:s.pageY,touchStartTime:e.timeStamp}),o.extend(i,{up:n,touchY:s.pageY}),this.menuScroll(t,!0,Math.abs(s.pageY-a))}e.preventDefault()}else i.touchY!==void 0&&((i.momentum=15*Math.pow(Math.abs(s.pageY-i.touchStartY)/(e.timeStamp-i.touchStartTime),2))&&(this.menuScrollStop(t),this.menuScroll(t),e.preventDefault()),delete i.touchY)}}},menuShow:function(t){if((t.dataSM("beforefirstshowfired")||(t.dataSM("beforefirstshowfired",!0),this.$root.triggerHandler("beforefirstshow.smapi",t[0])!==!1))&&this.$root.triggerHandler("beforeshow.smapi",t[0])!==!1&&(t.dataSM("shown-before",!0),c&&t.stop(!0,!0),!t.is(":visible"))){var e=t.dataSM("parent-a"),s=this.isCollapsible();if((this.opts.keepHighlighted||s)&&e.addClass("highlighted"),s)t.removeClass("sm-nowrap").css({zIndex:"",width:"auto",minWidth:"",maxWidth:"",top:"",left:"",marginLeft:"",marginTop:""});else{if(t.css("z-index",this.zIndexInc=(this.zIndexInc||this.getStartZIndex())+1),(this.opts.subMenusMinWidth||this.opts.subMenusMaxWidth)&&(t.css({width:"auto",minWidth:"",maxWidth:""}).addClass("sm-nowrap"),this.opts.subMenusMinWidth&&t.css("min-width",this.opts.subMenusMinWidth),this.opts.subMenusMaxWidth)){var i=this.getWidth(t);t.css("max-width",this.opts.subMenusMaxWidth),i>this.getWidth(t)&&t.removeClass("sm-nowrap").css("width",this.opts.subMenusMaxWidth)}this.menuPosition(t)}var a=function(){t.css("overflow","")};s?c&&this.opts.collapsibleShowFunction?this.opts.collapsibleShowFunction.call(this,t,a):t.show(this.opts.collapsibleShowDuration,a):c&&this.opts.showFunction?this.opts.showFunction.call(this,t,a):t.show(this.opts.showDuration,a),e.attr("aria-expanded","true"),t.attr({"aria-expanded":"true","aria-hidden":"false"}),this.visibleSubMenus.push(t),this.$root.triggerHandler("show.smapi",t[0])}},popupHide:function(t){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0);var e=this;this.hideTimeout=setTimeout(function(){e.menuHideAll()},t?1:this.opts.hideTimeout)},popupShow:function(t,e){if(!this.opts.isPopup)return void alert(`SmartMenus jQuery Error:

If you want to show this menu via the "popupShow" method, set the isPopup:true option.`);if(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0),this.$root.dataSM("shown-before",!0),c&&this.$root.stop(!0,!0),!this.$root.is(":visible")){this.$root.css({left:t,top:e});var s=this,i=function(){s.$root.css("overflow","")};c&&this.opts.showFunction?this.opts.showFunction.call(this,this.$root,i):this.$root.show(this.opts.showDuration,i),this.visibleSubMenus[0]=this.$root}},refresh:function(){this.destroy(!0),this.init(!0)},rootKeyDown:function(t){if(this.handleEvents())switch(t.keyCode){case 27:var e=this.activatedItems[0];if(e){this.menuHideAll(),e[0].focus();var s=e.dataSM("sub");s&&this.menuHide(s)}break;case 32:var i=o(t.target);if(i.is("a")&&this.handleItemEvents(i)){var s=i.dataSM("sub");s&&!s.is(":visible")&&(this.itemClick({currentTarget:t.target}),t.preventDefault())}}},rootOut:function(t){if(this.handleEvents()&&!this.isTouchMode()&&t.target!=this.$root[0]&&(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0),!this.opts.showOnClick||!this.opts.hideOnClick)){var e=this;this.hideTimeout=setTimeout(function(){e.menuHideAll()},this.opts.hideTimeout)}},rootOver:function(t){this.handleEvents()&&!this.isTouchMode()&&t.target!=this.$root[0]&&this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0)},winResize:function(t){if(this.handleEvents()){if(!("onorientationchange"in window)||t.type=="orientationchange"){var e=this.isCollapsible();this.wasCollapsible&&e||(this.activatedItems.length&&this.activatedItems[this.activatedItems.length-1][0].blur(),this.menuHideAll()),this.wasCollapsible=e}}else if(this.$disableOverlay){var s=this.$root.offset();this.$disableOverlay.css({top:s.top,left:s.left,width:this.$root.outerWidth(),height:this.$root.outerHeight()})}}}}),o.fn.dataSM=function(t,e){return e?this.data(t+"_smartmenus",e):this.data(t+"_smartmenus")},o.fn.removeDataSM=function(t){return this.removeData(t+"_smartmenus")},o.fn.smartmenus=function(t){if(typeof t=="string"){var e=arguments,s=t;return Array.prototype.shift.call(e),this.each(function(){var i=o(this).data("smartmenus");i&&i[s]&&i[s].apply(i,e)})}return this.each(function(){var i=o(this).data("sm-options")||null;i&&typeof i!="object"&&(i=null,alert(`ERROR

SmartMenus jQuery init:
The value of the "data-sm-options" attribute must be valid JSON.`)),i&&o.each(["showFunction","hideFunction","collapsibleShowFunction","collapsibleHideFunction"],function(){this in i&&delete i[this]}),new o.SmartMenus(this,o.extend({},o.fn.smartmenus.defaults,t,i))})},o.fn.smartmenus.defaults={isPopup:!1,mainMenuSubOffsetX:0,mainMenuSubOffsetY:0,subMenusSubOffsetX:0,subMenusSubOffsetY:0,subMenusMinWidth:"10em",subMenusMaxWidth:"20em",subIndicators:!0,subIndicatorsPos:"append",subIndicatorsText:"",scrollStep:30,scrollAccelerate:!0,showTimeout:250,hideTimeout:500,showDuration:0,showFunction:null,hideDuration:0,hideFunction:function(t,e){t.fadeOut(200,e)},collapsibleShowDuration:0,collapsibleShowFunction:function(t,e){t.slideDown(200,e)},collapsibleHideDuration:0,collapsibleHideFunction:function(t,e){t.slideUp(200,e)},showOnClick:!1,hideOnClick:!0,noMouseOver:!1,keepInViewport:!0,keepHighlighted:!0,markCurrentItem:!1,markCurrentTree:!0,rightToLeftSubMenus:!1,bottomToTopSubMenus:!1,collapsibleBehavior:"default"},o});
