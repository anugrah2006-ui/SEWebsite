(function(r,_){"use strict";window.VAMTAM_FRONT.elementor=window.VAMTAM_FRONT.elementor||{};var u={domLoaded:function(){this.VamtamMainNavHandler.init(),this.VamtamActionLinksHandler.init(),this.VamtamPopupsHandler.disablePopupAutoFocus(),elementorFrontend.config.experimentalFeatures.e_optimized_css_loading&&this.VamtamImprovedCSSLoadingHandler.init()},pageLoaded:function(){this.VamtamPopupsHandler.init(),this.VamtamWidgetsHandler.FiboSearchBarWidget(),this.VamtamWidgetsHandler.stickyInsideParentFix()},VamtamPopupsHandler:{init:function(){this.searchFormPopupsGetFocus(),this.absolutelyPositionedPopups(),this.alignedWithSelectorPopups(),this.enablePageTransitionsForPopupLinks(),this.lateInit()},lateInit:function(){setTimeout(()=>{this.hoverActivatedPopups()},50)},searchFormPopupsGetFocus:function(){window.elementorFrontendConfig.kit.vamtam_theme_search_form_popups_get_focus&&elementorFrontend.elements.$window.on("elementor/popup/show",e=>{if(!e.originalEvent)return;const t=e.originalEvent.detail.id,n=e.originalEvent.detail.instance;if(!(!t||!n)&&n.$element.find('form[role="search"]').length){const o=n.$element.find('input[type="search"]').first();o.focus(),o.filter('[id^="dgwt-wcas-"]')&&setTimeout(()=>{o.focus()},500)}})},absolutelyPositionedPopups:function(){const e=[];elementorFrontend.elements.$window.on("elementor/popup/show",t=>{if(!t.originalEvent)return;const n=t.originalEvent.detail.id,o=t.originalEvent.detail.instance;!n||!o||e.includes(n)||o.$element.filter('[data-elementor-settings*="vamtam_abs_pos"]').length&&(o.$element.closest(`#elementor-popup-modal-${n}`).addClass("vamtam-abs-pos"),e.push(n))})},alignedWithSelectorPopups:function(){const e=[],t=()=>{e.length=0};elementorFrontend.elements.$window.on("elementor/popup/show",n=>{if(!n.originalEvent)return;const o=n.originalEvent.detail.id,m=n.originalEvent.detail.instance;if(!o||!m||e.includes(o))return;const s=m.$element.filter('[data-elementor-settings*="vamtam_align_with_selector"]');if(s.length){const i=m.$element.closest(".dialog-widget-content"),a=s.data("elementorSettings").open_selector,p=a&&r(`${a}:visible`);if(!p.length)return;const h=p[0].getBoundingClientRect();window.requestAnimationFrame(()=>{i.css({top:h.bottom+"px",left:h.left+"px"})}),e.push(o)}}),window.removeEventListener("resize",t),window.addEventListener("resize",t,!0)},disablePopupAutoFocus:function(){elementorFrontend.elements.$window.on("elementor/popup/show elementor/popup/hide",e=>{setTimeout(()=>{document.activeElement.nodeName!=="input"&&document.activeElement.blur()},100)})},enablePageTransitionsForPopupLinks(){if(!elementorFrontend.config.experimentalFeatures["page-transitions"])return;let e=jQuery("e-page-transition");if(!e.length||(e=e[0],e.getAttribute("triggers")))return;const t='.elementor-popup-modal a:not( [data-elementor-open-lightbox="yes"] )',n=e.onLinkClick;n&&jQuery(document).on("click",t,n.bind(e))},hoverActivatedPopups:function(){if(window.elementorFrontend.isEditMode())return;const e=this.utils.getPopups();if(!e.length)return;const t=[];function n(s){const i=jQuery(s);if(!i.length)return;let a;return t.forEach(p=>{a||i.filter(p.selector).length&&(a=p)}),a}function o(s){let i;return t.forEach(a=>{i||a.id===s&&(i=a)}),i}function m(s,i){return i!=="open_selector"||!jQuery(s).find("*:hover").length}e.forEach(s=>{if(s.instance.getDocumentSettings().vamtam_open_on_selector_hover){const i=s.instance.getDocumentSettings().open_selector,a=s.instance.getDocumentSettings().vamtam_close_on_hover_lost;t.push({id:parseInt(s.id),selector:i,instance:s.instance,isHovering:!1,selectorIsHovering:!1,closeOnHoverLost:a,modal:s.instance.getModal(),showPopup:function(){this.instance.showModal(),document.activeElement.nodeName!=="input"&&document.activeElement.blur()},hidePopup:function(){this.modal.hide()},isVisible:function(){return this.modal.isVisible()}})}}),t.length&&t.forEach(s=>{jQuery(s.selector).on("mouseenter",function(){const i=n(this);i&&(i.selectorIsHovering=!0,i.isVisible()||i.showPopup())}),jQuery(document.body).on("mouseenter",`#elementor-popup-modal-${s.id} [data-elementor-id="${s.id}"]`,function(){const i=parseInt(jQuery(this).data("elementorId"));if(Number.isInteger(i)){const a=o(i);a&&(a.isHovering=!0)}}),s.closeOnHoverLost&&(jQuery(s.selector).on("mouseleave",function(){setTimeout(()=>{if(!m(this,"open_selector"))return;const i=n(this);i&&(i.selectorIsHovering=!1,i.isVisible()&&!i.isHovering&&i.hidePopup())},200)}),jQuery(document.body).on("mouseleave",`#elementor-popup-modal-${s.id} [data-elementor-id="${s.id}"]`,function(){setTimeout(()=>{const i=parseInt(jQuery(this).data("elementorId"));if(Number.isInteger(i)){const a=o(i);a&&(a.isHovering=!1,a.selectorIsHovering||a.hidePopup())}},200)}))})},utils:{getPopups:function(){const e=elementorFrontend.documentsManager.documents,t=[];return Object.entries(e).forEach(([n,o])=>{o.initModal&&(o.getModal||o.initModal(),t.push({id:n,instance:o}))}),t}}},VamtamMainNavHandler:{init:function(){this.fixMenuDrodownScrolling()},fixMenuDrodownScrolling:function(){var e=r(".elementor-location-header .elementor-nav-menu--dropdown-tablet .elementor-nav-menu--dropdown.elementor-nav-menu__container").first(),t=e.siblings(".elementor-menu-toggle")[0];if(e.length&&t.length){var n=function(){if(r(t).hasClass("elementor-active")){var o=r("html").hasClass("ios-safari")?e[0].getBoundingClientRect().top+100:e[0].getBoundingClientRect().top;e.css("max-height","calc(100vh - "+o+"px)"),t.removeEventListener("click",n)}};t.addEventListener("click",n)}}},VamtamActionLinksHandler:{init:function(){this.popupActionLinks()},popupActionLinks:function(){var e=this,t=window.VAMTAM.isBelowMaxDeviceWidth(),n=[],o=function(d,l,c){var g=r("#elementor-popup-modal-"+d),v=r(g).find(".dialog-widget-content"),b=window.VAMTAM.adminBarHeight;if(v.length&&l){var f=l.getBoundingClientRect(),w;c?r(v).css({top:"",left:""}):(r(v).css({top:f.bottom-b,left:f.left}),w=setInterval(function(){r(g).css("display")==="none"&&(r(v).css({top:"",left:""}),clearInterval(w))},500))}},m=function(d){n.forEach(function(l){d?o(l.id,l.parent,!0):o(l.id,l.parent)})},s=function(){var d=window.VAMTAM.isBelowMaxDeviceWidth();t!==d?(d?m(!0):m(),t=d):d||m()},i=function(){requestAnimationFrame(function(){m()})},a=function(d,l){var c;n.forEach(function(g){g.id===d&&(g.parent=l,c=!0)}),c||n.push({id:d,parent:l})};function p(d){const l=r(d).parents(".elementor-element.elementor-widget")[0];if(!l)return;let c=r(l).attr("data-settings");if(c){try{c=JSON.parse(c)}catch(g){return}c.sticky&&(window.removeEventListener("scroll",i),window.addEventListener("scroll",i,{passive:!0}))}}var h=function(d){var l=r(d.currentTarget).attr("href");if(l){var c=e.utils.getSettingsFromActionLink(l);c&&c.align_with_parent&&(a(c.id,d.currentTarget),window.VAMTAM.isMaxDeviceWidth()&&o(c.id,d.currentTarget),window.removeEventListener("resize",s),window.addEventListener("resize",s,!1),p(d.currentTarget))}};elementorFrontend.elements.$document.on("click",'a[href^="#elementor-action"]',h)},utils:{getSettingsFromActionLink:function(e){if(e=decodeURIComponent(e)){var t=e.match(/settings=(.+)/),n={};return t&&(n=JSON.parse(atob(t[1]))),n}},getActionFromActionLink:function(e){if(e=decodeURIComponent(e)){var t=e.match(/action=(.+?)&/),n;if(t)return t[1]}}}},VamtamWidgetsHandler:{FiboSearchBarWidget:()=>{u.VamtamWidgetsHandler.isWidgetModActive("wp-widget-dgwt_wcas_ajax_search")&&(r(".dgwt-wcas-suggestions-wrapp").addClass("vamtam-has-theme-widget-styles"),r(".dgwt-wcas-details-wrapp").addClass("vamtam-has-theme-widget-styles"),window.addEventListener("beforeunload",()=>{r(".dgwt-wcas-suggestions-wrapp, .dgwt-wcas-details-wrapp").hide()},{capture:!0}))},stickyInsideParentFix:()=>{const e=document.querySelectorAll(`.elementor-sticky[data-settings*='"sticky_parent":"yes"']`);e.length&&e.forEach(t=>{window.VAMTAM_FRONT.WidgetsResizeObserver.observe(t,function(){window.VAMTAM.debounce(window.dispatchEvent(new Event("resize")),500)})})},isWidgetModActive:e=>{if(!e)return!1;const t=elementorFrontend.getKitSettings(),n="vamtam_theme_";return!!window.VAMTAM_FRONT.widget_mods_list[e]&&(t.vamtam_theme_enable_all_widget_mods==="yes"||t.vamtam_theme_disable_all_widget_mods!=="yes"&&t[`vamtam_theme_${e}`]==="yes")}},VamtamImprovedCSSLoadingHandler:{init:()=>{const e={...VAMTAM_FRONT.widgets_assets_data};if(!e)return;r("#vamtam-all-js-after").remove(),delete VAMTAM_FRONT.widgets_assets_data;let t="";Object.keys(e).forEach(n=>{const o=e[n].content,m=`.elementor-widget-${n} > .elementor-widget-container`;if(o){if(r(`${m} > style, ${m} > link`).length)return;t=t+`\r
`+o}}),t&&r("body").append(`<div id="vamtam-css-opt-fallback">${t}</div>`)}},WidgetsObserver:{observer:null,targetsMap:new Map,init(){this.observer||(this.observer=new IntersectionObserver(this.handleIntersect.bind(this),{root:null,threshold:0,rootMargin:"0px"}))},observe(e,t,n={once:!0}){this.init(),this.targetsMap.has(e)||(this.targetsMap.set(e,{onIntersect:t,options:n}),this.observer.observe(e))},unobserve(e){this.targetsMap.has(e)&&(this.targetsMap.delete(e),this.observer.unobserve(e))},handleIntersect(e){e.forEach(t=>{if(this.targetsMap.has(t.target)){const{onIntersect:n,options:o}=this.targetsMap.get(t.target);t.isIntersecting&&(n(),o.once&&this.unobserve(t.target))}})}},WidgetsResizeObserver:{observer:null,targetsMap:new Map,init(){this.observer||(this.observer=new ResizeObserver(this.handleResize.bind(this)))},observe(e,t){this.init(),this.targetsMap.has(e)||(this.targetsMap.set(e,{onElementResize:t}),this.observer.observe(e))},unobserve(e){this.targetsMap.has(e)&&(this.targetsMap.delete(e),this.observer.unobserve(e))},handleResize(e){e.forEach(t=>{if(this.targetsMap.has(t.target)){const{onElementResize:n}=this.targetsMap.get(t.target);n()}})}}};window.VAMTAM_FRONT.elementor.urlActions=u.VamtamActionLinksHandler.utils,window.VAMTAM_FRONT.elementor.popups=u.VamtamPopupsHandler.utils,window.VAMTAM_FRONT.elementor.widgets={isWidgetModActive:u.VamtamWidgetsHandler.isWidgetModActive},window.VAMTAM_FRONT.WidgetsObserver=u.WidgetsObserver,window.VAMTAM_FRONT.WidgetsResizeObserver=u.WidgetsResizeObserver,r(document).ready(function(){u.domLoaded()}),r(window).on("load",function(){u.pageLoaded()});class M extends elementorModules.frontend.handlers.Base{onInit(...t){super.onInit(...t),this.checkAddBaseThemeStylesClass()}checkAddBaseThemeStylesClass(){r("body").hasClass("elementor-editor-active")&&this.isWidgetModActive()&&this.$element.addClass("vamtam-has-theme-widget-styles")}isWidgetModActive(){let t=this.getElementType();return t==="widget"&&(t=this.getWidgetType()),u.VamtamWidgetsHandler.isWidgetModActive(t)}}jQuery(window).on("elementor/frontend/init",()=>{const e=t=>{elementorFrontend.elementsHandler.addHandler(M,{$element:t})};elementorFrontend.hooks.addAction("frontend/element_ready/global",e)})})(jQuery);
