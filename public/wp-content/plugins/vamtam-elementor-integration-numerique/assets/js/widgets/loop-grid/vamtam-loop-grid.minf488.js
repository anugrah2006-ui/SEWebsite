class VamtamLoopGridMasonry extends elementorModules.frontend.handlers.Base{onInit(){elementorModules.frontend.handlers.Base.prototype.onInit.apply(this,arguments),this.bindEvents(),this.loadMoreMasonryFix(),this.checkApplySafariFix()}checkApplySafariFix(){const e=this;jQuery(window).on("load",()=>{jQuery("html").hasClass("safari")&&setTimeout(()=>{e.onWindowResize()},10)})}recalculateMasonry(){this.elements=this.getDefaultElements(),this.onWindowResize()}checkApplyFirstInLoopStyles(){const e=this.$element,n=e.find(".elementor-loop-container"),t=n.find(".e-loop-item:visible");if(!t.length)return;const s=[".vamtam-mt-first-only"];jQuery.each(s,(o,r)=>{const a=t.children(r);a.length>1&&jQuery.each(a,(m,l)=>{m>0&&r===".vamtam-mt-first-only"&&jQuery(l).css("margin-top","0")})})}checkDiscardDuplicates(){const e=this.$element,n=e.find(".elementor-loop-container"),t=n.find(".e-loop-item:visible"),s=jQuery(".vamtam-blog-featured-post .e-loop-item:visible"),o=[],r=[];let a=0;if(t.length){if(jQuery.each(t,(m,l)=>{const i=parseInt(t[m].classList[4].match(/\d+/)[0]);i&&!isNaN(i)&&(o.indexOf(i)===-1?o.push(i):(jQuery(l).remove(),a++))}),s.length){jQuery.each(s,l=>{const i=parseInt(s[l].classList[4].match(/\d+/)[0]);i&&!isNaN(i)&&r.indexOf(i)===-1&&r.push(i)});const m=n.find(".e-loop-item:visible");jQuery.each(m,(l,i)=>{const c=parseInt(m[l].classList[4].match(/\d+/)[0]);c&&!isNaN(c)&&r.indexOf(c)!==-1&&(jQuery(i).remove(),a++)})}return a}}loadMoreMasonryFix(){const e=this.getElementSettings().pagination_type;if(e!=="load_more_on_click"&&e!=="load_more_infinite_scroll")return;var n=this.$element,t=n.find(".elementor-loop-container"),s=n.find(".elementor-button"),o=n.find(".e-load-more-anchor"),r="e-load-more-pagination-end",a=null,m=null,l=null,i=this;const c=()=>{this.isEdit||(l=elementorModules.utils.Scroll.scrollObserver({callback:h=>{h.isInViewport&&(l.unobserve(o[0]),d())}})).observe(o[0])},p=()=>{e==="load_more_on_click"?jQuery(s).off("click",d):l.disconnect()},d=()=>{a=t.find(".e-loop-item:visible").length;let h=!1;const g=setInterval(()=>{if(m=t.find(".e-loop-item:visible").length,a!==m){const f=i.checkDiscardDuplicates();i.checkApplyFirstInLoopStyles(),i.recalculateMasonry(),a=m-f,clearInterval(g),h=!0,l&&l.observe(o[0])}n.hasClass(r)&&p()},50);h||setTimeout(()=>{clearInterval(g)},1e4)};e==="load_more_on_click"?jQuery(s).on("click",d):c()}getSkinPrefix(){return""}bindEvents(){var e=this.getModelCID();elementorFrontend.addListenerOnce(e,"resize",this.onWindowResize.bind(this))}getClosureMethodsNames(){return elementorModules.frontend.handlers.Base.prototype.getClosureMethodsNames.apply(this,arguments).concat(["fitImages","onWindowResize","runMasonry"])}getDefaultSettings(){return{classes:{fitHeight:"elementor-fit-height",hasItemRatio:"elementor-has-item-ratio"},selectors:{postsContainer:".elementor-loop-container",post:".e-loop-item",postThumbnail:".elementor-post__thumbnail",postThumbnailImage:".elementor-post__thumbnail img"}}}getDefaultElements(){var e=this.getSettings("selectors");return{$postsContainer:this.$element.find(e.postsContainer),$posts:this.$element.find(e.post)}}fitImage(e){var n=this.getSettings(),t=e.find(n.selectors.postThumbnail),s,o=t.find("img")[0];if(o){var r=t.outerHeight()/t.outerWidth(),a=o.naturalHeight/o.naturalWidth;t.toggleClass(n.classes.fitHeight,a<r)}}fitImages(){var e=jQuery,n=this,t=getComputedStyle(this.$element[0],":after").content,s=this.getSettings();this.elements.$postsContainer.toggleClass(s.classes.hasItemRatio,!!t.match(/\d/)),n.isMasonryEnabled()||this.elements.$posts.each(function(){var o=e(this),r=o.find(s.selectors.postThumbnailImage);n.fitImage(o),r.on("load",function(){n.fitImage(o)})})}setColsCountSettings(){var e=elementorFrontend.getCurrentDeviceMode(),n=this.getElementSettings(),t=this.getSkinPrefix(),s;switch(e){case"mobile":s=n[t+"columns_mobile"];break;case"tablet":s=n[t+"columns_tablet"];break;default:s=n[t+"columns"]}this.setSettings("colsCount",s)}isMasonryEnabled(){return!!this.getElementSettings(this.getSkinPrefix()+"masonry")}getVerticalSpaceBetween(){let e=elementorProFrontend.utils.controls.getResponsiveControlValue(this.getElementSettings(),`${this.getSkinPrefix()}row_gap`,"size");return this.getSkinPrefix()===""&&e===""&&(e=this.getElementSettings("item_gap.size")),e}runMasonry(){var e=this.elements;e.$posts.css({marginTop:"",transitionDuration:""}),this.setColsCountSettings();var n=this.getSettings("colsCount"),t=this.isMasonryEnabled()&&n>=2;if(e.$postsContainer.toggleClass("elementor-posts-masonry",t),!t)return void e.$postsContainer.height("");const s=this.getVerticalSpaceBetween();var o;new elementorModules.utils.Masonry({container:e.$postsContainer,items:e.$posts.filter(":visible"),columnsCount:this.getSettings("colsCount"),verticalSpaceBetween:s||0}).run()}onWindowResize(){this.fitImages(),this.runMasonry()}}jQuery(window).on("elementor/frontend/init",()=>{if(elementorFrontend.elementsHandler&&elementorFrontend.elementsHandler.attachHandler)elementorFrontend.elementsHandler.attachHandler("loop-grid",VamtamLoopGridMasonry,"post");else{const u=e=>{elementorFrontend.elementsHandler.addHandler(VamtamLoopGridMasonry,{$element:e})};elementorFrontend.hooks.addAction("frontend/element_ready/loop-grid.post",u,100)}});
