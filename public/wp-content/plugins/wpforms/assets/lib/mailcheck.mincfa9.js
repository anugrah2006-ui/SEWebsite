var Mailcheck={domainThreshold:2,secondLevelThreshold:2,topLevelThreshold:2,defaultDomains:["msn.com","bellsouth.net","telus.net","comcast.net","optusnet.com.au","earthlink.net","qq.com","sky.com","icloud.com","mac.com","sympatico.ca","googlemail.com","att.net","xtra.co.nz","web.de","cox.net","gmail.com","ymail.com","aim.com","rogers.com","verizon.net","rocketmail.com","google.com","optonline.net","sbcglobal.net","aol.com","me.com","btinternet.com","charter.net","shaw.ca"],defaultSecondLevelDomains:["yahoo","hotmail","mail","live","outlook","gmx"],defaultTopLevelDomains:["com","com.au","com.tw","ca","co.nz","co.uk","de","fr","it","ru","net","org","edu","gov","jp","nl","kr","se","eu","ie","co.il","us","at","be","dk","hk","es","gr","ch","no","cz","in","net","net.au","info","biz","mil","co.jp","sg","hu","uk"],run:function(a){a.domains=a.domains||Mailcheck.defaultDomains,a.secondLevelDomains=a.secondLevelDomains||Mailcheck.defaultSecondLevelDomains,a.topLevelDomains=a.topLevelDomains||Mailcheck.defaultTopLevelDomains,a.distanceFunction=a.distanceFunction||Mailcheck.sift4Distance;var t=function(e){return e},o=a.suggested||t,l=a.empty||t,i=Mailcheck.suggest(Mailcheck.encodeEmail(a.email),a.domains,a.secondLevelDomains,a.topLevelDomains,a.distanceFunction);return i?o(i):l()},suggest:function(a,t,o,l,i){a=a.toLowerCase();var e=this.splitEmail(a);if(o&&l&&o.indexOf(e.secondLevelDomain)!==-1&&l.indexOf(e.topLevelDomain)!==-1)return!1;var n=this.findClosestDomain(e.domain,t,i,this.domainThreshold);if(n)return n==e.domain?!1:{address:e.address,domain:n,full:e.address+"@"+n};var r=this.findClosestDomain(e.secondLevelDomain,o,i,this.secondLevelThreshold),s=this.findClosestDomain(e.topLevelDomain,l,i,this.topLevelThreshold);if(e.domain){n=e.domain;var m=!1;if(r&&r!=e.secondLevelDomain&&(n=n.replace(e.secondLevelDomain,r),m=!0),s&&s!=e.topLevelDomain&&e.secondLevelDomain!==""&&(n=n.replace(new RegExp(e.topLevelDomain+"$"),s),m=!0),m)return{address:e.address,domain:n,full:e.address+"@"+n}}return!1},findClosestDomain:function(a,t,o,l){l=l||this.topLevelThreshold;var i,e=1/0,n=null;if(!a||!t)return!1;o||(o=this.sift4Distance);for(var r=0;r<t.length;r++){if(a===t[r])return a;i=o(a,t[r]),e>i&&(e=i,n=t[r])}return l>=e&&n!==null?n:!1},sift4Distance:function(a,t,o){if(o===void 0&&(o=5),!a||!a.length)return t?t.length:0;if(!t||!t.length)return a.length;for(var l=a.length,i=t.length,e=0,n=0,r=0,s=0,m=0,u=[];l>e&&i>n;){if(a.charAt(e)==t.charAt(n)){s++;for(var h=!1,f=0;f<u.length;){var d=u[f];if(e<=d.c1||n<=d.c2){h=Math.abs(n-e)>=Math.abs(d.c2-d.c1),h?m++:d.trans||(d.trans=!0,m++);break}e>d.c2&&n>d.c1?u.splice(f,1):f++}u.push({c1:e,c2:n,trans:h})}else{r+=s,s=0,e!=n&&(e=n=Math.min(e,n));for(var c=0;o>c&&(l>e+c||i>n+c);c++){if(l>e+c&&a.charAt(e+c)==t.charAt(n)){e+=c-1,n--;break}if(i>n+c&&a.charAt(e)==t.charAt(n+c)){e--,n+=c-1;break}}}e++,n++,(e>=l||n>=i)&&(r+=s,s=0,e=n=Math.min(e,n))}return r+=s,Math.round(Math.max(l,i)-r+m)},splitEmail:function(a){a=a!==null?a.replace(/^\s*/,"").replace(/\s*$/,""):null;var t=a.split("@");if(t.length<2)return!1;for(var o=0;o<t.length;o++)if(t[o]==="")return!1;var l=t.pop(),i=l.split("."),e="",n="";if(i.length===0)return!1;if(i.length==1)n=i[0];else{e=i[0];for(var r=1;r<i.length;r++)n+=i[r]+".";n=n.substring(0,n.length-1)}return{topLevelDomain:n,secondLevelDomain:e,domain:l,address:t.join("@")}},encodeEmail:function(a){var t=encodeURI(a);return t=t.replace("%20"," ").replace("%25","%").replace("%5E","^").replace("%60","`").replace("%7B","{").replace("%7C","|").replace("%7D","}")}};typeof module!="undefined"&&module.exports&&(module.exports=Mailcheck),typeof define=="function"&&define.amd&&define("mailcheck",[],function(){return Mailcheck}),typeof window!="undefined"&&window.jQuery&&function(a){a.fn.mailcheck=function(t){var o=this;if(t.suggested){var l=t.suggested;t.suggested=function(e){l(o,e)}}if(t.empty){var i=t.empty;t.empty=function(){i.call(null,o)}}t.email=this.val(),Mailcheck.run(t)}}(jQuery);
